<%- include("./partials/head.ejs", {pageTitle: "Symptoms"}) %>

<main class="container my-4">
  <header
    class="row col-xs col-md-10 offset-md-1 col-lg-8 offset-lg-2 text-center"
  >
    <h1><%= user.name %>'s Symptoms</h1>
  </header>

  <section class="row col-xs">
    <form
      action="/symptoms/<%= user.id %>/vaccination"
      method="POST"
      class="p-4 my-4 border rounded"
    >
      <h2>Vaccination</h2>
    <hr>
      <select name="vaccination" class="form-select mb-3">
        <option selected>Select vaccine</option>
        <option value="null">Not Vaccinated</option>
        <option value="Biontech">Biontech</option>
        <option value="Sinovac">Sinovac</option>
        <option value="Moderna">Moderna</option>
      </select>

      <button class="btn btn-primary">Submit Vaccination</button>
    </form>

    <form
      action="/symptoms/<%= user.id %>"
      method="POST"
      class="p-4 my-4 border rounded"
    >
      <h2>Today's Symptoms</h2>
    <hr>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="fever"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Fever</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="dryCough"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Dry coughs</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="fatigue"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Fatigue</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="lossOfTasteOrSmell"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Loss of taste or smell</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="achesAndPains"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Aches and pains</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="breathingDifficulties"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Breathing difficulties</label
        >
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          id="flexSwitchCheckDefault"
          name="chestPainOrPressure"
        />
        <label class="form-check-label" for="flexSwitchCheckDefault"
          >Chest pain or pressure</label
        >
      </div>

      <button class="btn btn-primary mt-2">Submit Symptoms</button>
    </form>
  </section>

  <section class="row col-xs border rounded p-4">
    <h2>History of Symptoms</h2>
    <hr>
    <div class="table-responsive">

      <table class="table">
        <thead>
        <tr class="text-center">
          <th scope="col" class="text-start">Date</th>
          <th scope="col">Fever</th>
          <th scope="col">Dry Cough</th>
          <th scope="col">Fatigue</th>
          <th scope="col">Loss of Tast & Smell</th>
          <th scope="col">Aches and Pains</th>
          <th scope="col">Breathing Difficulties</th>
          <th scope="col">Chest Pain or Pressure</th>
        </tr>
      </thead>
      <tbody>
        <% user.data.forEach(symptomSet => { %> 
          <tr class="text-center">
            <th scope="row" class="text-start"><%= symptomSet.date %></th>
            <td class="text-light <%= symptomSet.fever ? "bg-danger" : "bg-success" %>" >
              <i class="fas <%= symptomSet.fever ? "fa-plus" : "fa-minus" %>"></i>
              </td>
              <td class="text-light <%= symptomSet.dryCough ? "bg-danger" : "bg-success" %>" >
                <i class="fas <%= symptomSet.dryCough ? "fa-plus" : "fa-minus" %>"
                  ></i>
                </td>
                <td class="text-light <%= symptomSet.fatigue ? "bg-danger" : "bg-success" %>" >
                  <i class="fas <%= symptomSet.fatigue ? "fa-plus" : "fa-minus" %>"></i>
                </td>
              <td class="text-light <%= symptomSet.lossOfTasteOrSmell ? "bg-danger" : "bg-success" %>" >
                <i class="fas <%= symptomSet.lossOfTasteOrSmell ? "fa-plus" : "fa-minus" %>"></i>
              </td>
              <td class="text-light <%= symptomSet.achesAndPains ? "bg-danger" : "bg-success" %>" >
                <i class="fas <%= symptomSet.achesAndPains ? "fa-plus" : "fa-minus" %>"></i>
              </td>
              <td class="text-light <%= symptomSet.breathingDifficulties ? "bg-danger" : "bg-success" %>" >
                <i class="fas <%= symptomSet.breathingDifficulties ? "fa-plus" : "fa-minus" %>"></i>
              </td>
              <td class="text-light <%= symptomSet.chestPainOrPressure ? "bg-danger" : "bg-success" %>" >
                <i class="fas <%= symptomSet.chestPainOrPressure ? "fa-plus" : "fa-minus" %>"></i>
              </td>
            </tr>
            <% })%>
          </tbody>
        </table>
      </div>
      </section>
    </main>
    
    <%- include("./partials/footer.ejs") %>
    